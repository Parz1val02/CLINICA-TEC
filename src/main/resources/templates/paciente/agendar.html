<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragmentos/cabecera.html::cabecera(titulo='Agendar Cita')}">
</head>


<body class="">

<!-- ===============================================-->
<!--    Main Content-->
<!-- ===============================================-->
<main class="main" id="top">

    <div class="container" data-layout="container">
        <nav th:replace="~{fragmentos/sidebarpaciente.html::sideBar}"></nav>
        <div class="content">
            <nav th:replace="~{fragmentos/topbarpaciente.html::topBar}"></nav>
            <div class="content">
                <div class="card mb-3 bg-card-gradient">
                    <div class="card-body" style="background: white;">
                        <div class="row justify-content-between align-items-center">
                            <div class="col-md-11">
                                <h1 class="mb-2 mb-md-0" style="color: #0032aa; font-weight: bold; padding-left: 15px; padding-bottom: 5px">
                                    Agendar cita
                                </h1>
                            </div>
                            <div class="col-md-11">
                                <h5 class="mb-2 mb-md-0" style="color: #3d8af7; font-weight: bold; padding-left: 15px">
                                    Agende sus futuras consultas médicas.
                                </h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ===============================================-->
            <!--    static Content-->
            <!-- ===============================================-->
            <div class="card mb-3 bg-card-gradient">
                <div class="card-body ">
                    <div class="row justify-content-between align-items-center">
                        <div class="col-md">
                            <h4 class="mb-2 mb-md-0 text-white" style="font-weight: bold">
                                Sede
                            </h4>
                            <div class="form-group" style="text-align: center">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <input type="text" id="disabledTextInput1" class="form-control" th:placeholder="${sedeUsuario.nombre}" disabled readonly>
                                    </div>
                                    <div class="col-sm-6">
                                        <button type="button" class="btn btn-info" >¿No encuentra la especialidad/examen que requiere?</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card mb-3 bg-card-gradient">
               <div class="card-body" style="background-color: white">
                   <div class="container">
                       <form th:action="@{/paciente/guardarCita}" method="post">
                           <div class="row">
                               <div class="col-sm-6">
                                   <div class="form-group">
                                       <input type="text" name="sedeId" id="sede" class="form-control" th:value="${sedeUsuario.id}" hidden="">
                                       <label for="fecha">Fecha:</label>
                                       <input type="text" name="fecha" id="fecha" class="form-control" th:classappend="${errorFecha != null?'is-invalid':''}" placeholder="Seleccione una fecha">
                                       <div class="invalid-feedback" th:if="${errorFecha!=null}" th:text="${errorFecha}"></div>
                                   </div>
                               </div>
                               <div class="col-sm-6">
                                   <div class="form-group">
                                       <label for="tipo">Tipo de cita: </label>
                                       <select  class="form-control" name="tipoCitaId" id="tipo">
                                           <option  th:each="tipo : ${tipos}"
                                                    th:value="${tipo.id}"
                                                    th:text="${tipo.tipoCita}"></option>
                                       </select>
                                   </div>
                               </div>
                           </div>
                           <div class="row">
                               <div class="col-sm-12">
                                   <div class="form-group" id="especialidad">
                                       <label for="inputEspecialidad">Especialidad:</label>
                                       <select  class="form-control" name="especialidadId" id="inputEspecialidad">
                                           <option  th:each="especialidad : ${especialidades}"
                                                    th:value="${especialidad.id}"
                                                    th:text="${especialidad.nombreEspecialidad}"></option>
                                       </select>
                                   </div>
                                   <div class="form-group" id="examen">
                                       <label for="inputExamen">Examen:</label>
                                       <select  class="form-control" name="examenId" id="inputExamen">
                                           <option  th:each="examen : ${examenes}"
                                                    th:value="${examen.id}"
                                                    th:text="${examen.nombre}"></option>
                                       </select>
                                   </div>
                               </div>
                           </div>
                           <!-- botón de envío -->
                           <button class="btn btn-primary submit">Continuar</button>
                           <a class="btn btn-secondary" style="text-align: center;background: #b38df7; border-radius: 15px;" th:href="@{/paciente/principal}">Cancelar</a>
                       </form>
                   </div>
               </div>
            </div>

            <footer th:replace="~{fragmentos/footer.html::footer}"></footer>
        </div>
    </div>
</main>
<!-- ===============================================-->
<!--    End of Main Content-->
<!-- ===============================================-->




<!-- ===============================================-->
<!--    JavaScripts-->
<!-- ===============================================-->
<div th:replace="~{fragmentos/scripts.html::scripts}"></div>
</body>
<script>
    $(document).ready(function(){
        flatpickr('#fecha', {
            dateFormat: 'd-m-Y',
            minDate: 'today',
            placeholder: 'Seleccionar una fecha'
        });
        $('#examen').hide();
        $('#inputExamen').prop("disabled", true);

        $('#tipo').on('change', function () {
            tipo = ($(this).val());
            if(tipo=='1'){
                $('#especialidad').show();
                $('#inputEspecialidad').prop("disabled", false);
                $('#examen').hide();
                $('#inputExamen').prop("disabled", true);
            }
            if(tipo=='2'){
                $('#especialidad').hide();
                $('#inputEspecialidad').prop("disabled", true);
                $('#examen').show();
                $('#inputExamen').prop("disabled", false);
            }
        });

    });
</script>
</html>>


